#:valid:11111111111111111111111111111111 THIS --b
# -*- coding: utf-8 -*-
#--------------------------------------------------------------
# ^^^^^ REAL SHEBANG ^^^^^ (real test with real reqman sources)
#    (works in vs code, press CTRL+SHIF+B)
#--------------------------------------------------------------

- POST: http://localhost:11111/ping
  doc: Taking <<R.time>> <<rm>>
  headers:
    X-Test: test
  body: hello
  params:
    inMethod: |
      assert x
      return True
    testRmDict: |
      assert x
      # assert x.status
      assert x["status"]
      return True
  save:
      isOK1: <<R|inMethod>>
      isOK2: <<R.content|inMethod>>
      isOK3: <<R.content|inMethod>>
      isOK4: <<R|testRmDict>>
  tests:
    - status: 201

    - isOK1: True
    - isOK2: True
    - isOK3: True
    - isOK4: True

    # old
    - content: hello
    - content: .? hel          # old can contains !

    - x-test:             # old can contains ! \__ not work with new core
    - X-TesT:             # old can contains ! /

    # newest
    - R.headers.x-test: test  # header lowercased!
    - R.headers.x-test: . ? es
    - R.headers.x-test: . !? xxx
    - R.headers.x-test: . !? xxx
    - R.headers.X-Test: test    # mixed case heaser works

    - R.header.X-Test: null   # old way (2.3.10 < 2.4)
    - R.header.x-test: null   # old way (2.3.10 < 2.4)

    # ultra newest
    - R.time: .<100    # ms

    - R.status: 201
    - R.content: hello
    - R.content: .? hel
    - R.headers.X-Test: test # mixed case heaser works
    - R.headers.x-test: test # header lowercased!
    - R.headers.x-test: .? es

    - R.request.url: http://localhost:11111/ping
    - R.request.method: POST
    - R.content: hello
    - R.content: .? hel
    - R.request.headers.X-Test: test # mixed case heaser works
    - R.request.headers.x-test: test # header lowercased!
    - R.request.headers.x-test: .? es # header lowercased!

    # confidential (the full exchange is in "rm")
    - R.status: 201
    - R.request.method: POST
